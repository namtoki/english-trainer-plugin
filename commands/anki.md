# /evt:anki コマンド

英単語クイズを実施します。

## 引数: $ARGUMENTS

---

## 処理フロー

### 1. 引数の確認

- `$ARGUMENTS` が数字でない場合、以下を表示して終了:
  ```
  使用方法: /evt:anki [数字]
  例: /evt:anki 5
  ```

### 2. words/ ディレクトリから単語を収集

Grep ツールを使って単語行のみを効率的に抽出してください:

```
pattern: ^[ \t]*- `[^`]+`
path: words/
glob: *.md
output_mode: content
```

これにより `- \`単語\`` 形式の行のみを取得できます。

### 3. ランダムに単語を選択

以下の手順を指定された数だけ繰り返してください:

1. `words/` ディレクトリ内の全ファイルからランダムに1ファイルを選択
2. そのファイル内の単語からランダムに1語を選択
3. 選択済みの単語は除外して次のループへ

**注意**: 同じ単語が重複しないようにすること

### 4. 単語のみを表示 (クイズ形式)

選択した単語を番号付きで表示:

```
📝 英単語クイズ (5問)

1. suggest
2. consider
3. provide
4. require
5. recommend
```

### 5. 答え合わせの確認

単語を表示した直後、AskUserQuestion ツールを使って確認:

```
答え合わせに進みますか？
```

オプション:
- "はい" - 答え合わせを表示
- "もう一度考える" - 再度単語リストを表示して待機

### 6. 答え合わせの表示

ユーザが「はい」を選択したら、各単語の完全な情報を表示:

```
📖 答え合わせ

1. suggest
   - `suggest` /səˈdʒest/ ([Neutral] 提案する、示唆する) I suggest we start the meeting early.
   📁 words/02_verb/4_Opinion.md

2. consider
   - `consider` /kənˈsɪdər/ ([Neutral] 考慮する、検討する) We need to consider all the options before deciding.
   📁 words/02_verb/5_Cognitive.md

...
```

### 7. 継続の確認

答え合わせ後、続けるか確認:

```
もう一度やりますか？
```

オプション:
- "はい (同じ数)" - 同じ問題数で再実行
- "はい (数を変更)" - 新しい数を入力してもらう
- "終了" - クイズを終了

---

## 注意事項

- 単語の重複を避ける: 同一セッション内で同じ単語が出ないようにする
- ファイルパスを記録: 答え合わせ時にどのファイルから取得したかを表示
- 登録単語が指定数より少ない場合: 利用可能な全単語を表示し、その旨を通知
